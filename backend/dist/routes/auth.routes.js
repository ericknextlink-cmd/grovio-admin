"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.authRoutes = void 0;
const express_1 = require("express");
const auth_controller_1 = require("../controllers/auth.controller");
const auth_middleware_1 = require("../middleware/auth.middleware");
const validation_middleware_1 = require("../middleware/validation.middleware");
const error_middleware_1 = require("../middleware/error.middleware");
const router = (0, express_1.Router)();
exports.authRoutes = router;
const authController = new auth_controller_1.AuthController();
router.post('/signup', validation_middleware_1.validateSignup, (0, error_middleware_1.asyncHandler)(authController.signup));
router.post('/signin', validation_middleware_1.validateSignin, (0, error_middleware_1.asyncHandler)(authController.signin));
router.get('/google', (0, error_middleware_1.asyncHandler)(authController.initiateGoogleAuth));
router.get('/google/callback', (0, error_middleware_1.asyncHandler)(authController.googleCallback));
router.post('/google/session', (0, error_middleware_1.asyncHandler)(authController.handleOAuthSession));
router.post('/google', validation_middleware_1.validateGoogleAuth, (0, error_middleware_1.asyncHandler)(authController.googleAuth));
router.post('/signout', auth_middleware_1.authenticateToken, (0, error_middleware_1.asyncHandler)(authController.signout));
router.get('/me', auth_middleware_1.authenticateToken, auth_middleware_1.requireUser, (0, error_middleware_1.asyncHandler)(authController.getProfile));
router.put('/me', auth_middleware_1.authenticateToken, auth_middleware_1.requireUser, validation_middleware_1.validateProfileUpdate, (0, error_middleware_1.asyncHandler)(authController.updateProfile));
router.post('/refresh', validation_middleware_1.validateRefreshToken, (0, error_middleware_1.asyncHandler)(authController.refreshToken));
